<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
     "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
    
<mapper namespace="com.elapid.spring01.dao.AdminProductDao">

<!-- 프로시저로 호출 -->
<insert id="registerProduct">
	call insertQueries(
    #{param1}, #{param2}, #{param3},
    #{param4}, #{param5},	
	#{param6}, #{param7}, #{param8},
	#{param9}, #{param10}, #{param11},
	#{param12}, #{param13},
	#{param14}, #{param15}, #{param16},
	#{param17}, #{param18}, #{param19}, 
	#{param20}, #{param21}, #{param22}, 
	#{param23}
	)
</insert>

<!-- p_id값 받아오기 -->
<select id="selectPidNum" resultType="com.elapid.spring01.dto.PidDto">
	SELECT P_ID FROM PRODUCT
	ORDER BY P_ID DESC LIMIT 1;
</select>

<!-- selectPidNum으로 받아온 p_id값을 각각의 릴레이션 테이블에 프로시저로 넣기 -->
<insert id="insertRelationProductForeignKey">
	call insertRelationProductForeignKey(
		#{param1}, #{param2}
		, #{param3}, #{param4}
		, #{param5}, #{param6}
	)
	
</insert>
	
</mapper>